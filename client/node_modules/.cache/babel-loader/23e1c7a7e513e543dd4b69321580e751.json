{"ast":null,"code":"import React from'react';import{Card,CardActions,CardContent,CardMedia,Button,Typography,ButtonBase}from'@material-ui/core/';import FavoriteBorderIcon from'@material-ui/icons/FavoriteBorder';import DeleteIcon from'@material-ui/icons/Delete';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';// import ThumbUpAltOutlined from '@material-ui/icons/ThumbUpAltOutlined';\nimport{useDispatch}from'react-redux';import moment from'moment';import{useHistory}from'react-router-dom';import{likePost,deletePost}from'../../../actions/posts';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(_ref){var _user$result3,_user$result4,_user$result5,_user$result6;var post=_ref.post,setCurrentId=_ref.setCurrentId,showModal=_ref.showModal;var dispatch=useDispatch();var classes=useStyles();var user=JSON.parse(localStorage.getItem('profile'));var history=useHistory();var Likes=function Likes(){var _post$likes;console.log(post);if((post===null||post===void 0?void 0:(_post$likes=post.likes)===null||_post$likes===void 0?void 0:_post$likes.length)>0){return post.likes.find(function(like){var _user$result,_user$result2;return like===((user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.googleId)||(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2._id));})?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FavoriteBorderIcon,{fontSize:\"small\"}),\"\\xA0\",post.likes.length>2?\"You and \".concat(post.likes.length-1,\" others\"):\"\".concat(post.likes.length,\" like\").concat(post.likes.length>1?'s':'')]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FavoriteBorderIcon,{fontSize:\"small\"}),\"\\xA0\",post.likes.length,\" \",post.likes.length===1?'Like':'Likes']});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FavoriteBorderIcon,{fontSize:\"small\"}),\"\\xA0Like\"]});};var handleLike=function handleLike(){if(!(user===null||user===void 0?void 0:user.token)){history.push('/auth');}else{dispatch(likePost(post._id));}};var openPost=function openPost(e){// dispatch(getPost(post._id, history));\nhistory.push(\"/posts/\".concat(post._id));};return/*#__PURE__*/_jsxs(Card,{className:classes.card,children:[/*#__PURE__*/_jsx(CardMedia,{className:classes.media,image:post.selectedFile||'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png',title:post.title,onClick:openPost}),/*#__PURE__*/_jsx(\"div\",{className:classes.overlay,children:/*#__PURE__*/_jsx(Typography,{className:classes.creator,variant:\"body2\",children:moment(post.createdAt).fromNow()})}),((user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.googleId)===(post===null||post===void 0?void 0:post.creator)||(user===null||user===void 0?void 0:(_user$result4=user.result)===null||_user$result4===void 0?void 0:_user$result4._id)===(post===null||post===void 0?void 0:post.creator))&&/*#__PURE__*/_jsx(\"div\",{className:classes.overlay2,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){showModal();setCurrentId(post._id);},style:{color:'white'},size:\"small\",children:/*#__PURE__*/_jsx(MoreHorizIcon,{fontSize:\"default\"})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{className:classes.overlay3,size:\"small\",color:\"primary\"//  disabled={!user?.result}\n//onClick={() => dispatch(likePost(post._id))}\n,onClick:handleLike,children:/*#__PURE__*/_jsx(Likes,{})})}),/*#__PURE__*/_jsx(\"div\",{className:classes.details}),/*#__PURE__*/_jsx(Typography,{className:classes.title//gutterBottom\n,variant:\"h6\",component:\"h2\",children:post.title}),/*#__PURE__*/_jsx(Typography,{className:classes.location//gutterBottom\n,variant:\"h6\",component:\"h2\",children:post.location}),/*#__PURE__*/_jsx(Typography,{className:classes.message,children:post.message}),/*#__PURE__*/_jsx(Typography,{className:classes.price//gutterBottom\n,variant:\"h6\",component:\"h2\",children:\"$\".concat(post.tags)}),/*#__PURE__*/_jsx(CardActions,{children:((user===null||user===void 0?void 0:(_user$result5=user.result)===null||_user$result5===void 0?void 0:_user$result5.googleId)===(post===null||post===void 0?void 0:post.creator)||(user===null||user===void 0?void 0:(_user$result6=user.result)===null||_user$result6===void 0?void 0:_user$result6._id)===(post===null||post===void 0?void 0:post.creator))&&/*#__PURE__*/_jsx(Button,{className:classes.overlay4,size:\"small\",color:\"secondary\",onClick:function onClick(){return dispatch(deletePost(post._id));},children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\"})})})]});};export default Post;","map":{"version":3,"sources":["/Users/albertshay/Desktop/silkroad/client/src/components/Posts/Post/Post.js"],"names":["React","Card","CardActions","CardContent","CardMedia","Button","Typography","ButtonBase","FavoriteBorderIcon","DeleteIcon","MoreHorizIcon","useDispatch","moment","useHistory","likePost","deletePost","useStyles","Post","post","setCurrentId","showModal","dispatch","classes","user","JSON","parse","localStorage","getItem","history","Likes","console","log","likes","length","find","like","result","googleId","_id","handleLike","token","push","openPost","e","card","media","selectedFile","title","overlay","creator","createdAt","fromNow","overlay2","color","overlay3","details","location","message","price","tags","overlay4"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  Button,\n  Typography,\n  ButtonBase,\n} from '@material-ui/core/';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\n// import ThumbUpAltOutlined from '@material-ui/icons/ThumbUpAltOutlined';\nimport { useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { useHistory } from 'react-router-dom';\n\nimport { likePost, deletePost } from '../../../actions/posts';\nimport useStyles from './styles';\n\nconst Post = ({ post, setCurrentId, showModal }) => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const history = useHistory();\n\n  const Likes = () => {\n    console.log(post);\n    if (post?.likes?.length > 0) {\n      return post.likes.find(\n        (like) => like === (user?.result?.googleId || user?.result?._id)\n      ) ? (\n        <>\n          <FavoriteBorderIcon fontSize='small' />\n          &nbsp;\n          {post.likes.length > 2\n            ? `You and ${post.likes.length - 1} others`\n            : `${post.likes.length} like${post.likes.length > 1 ? 's' : ''}`}\n        </>\n      ) : (\n        <>\n          <FavoriteBorderIcon fontSize='small' />\n          &nbsp;{post.likes.length} {post.likes.length === 1 ? 'Like' : 'Likes'}\n        </>\n      );\n    }\n\n    return (\n      <>\n        <FavoriteBorderIcon fontSize='small' />\n        &nbsp;Like\n      </>\n    );\n  };\n  const handleLike = () => {\n    if (!user?.token) {\n      history.push('/auth');\n    } else {\n      dispatch(likePost(post._id));\n    }\n  };\n  const openPost = (e) => {\n    // dispatch(getPost(post._id, history));\n\n    history.push(`/posts/${post._id}`);\n  };\n\n  return (\n    <Card className={classes.card}>\n      <CardMedia\n        className={classes.media}\n        image={\n          post.selectedFile ||\n          'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png'\n        }\n        title={post.title}\n        onClick={openPost}\n      />\n      <div className={classes.overlay}>\n        {/*<Typography className={classes.creator}>{post.name}</Typography> */}\n        <Typography className={classes.creator} variant='body2'>\n          {moment(post.createdAt).fromNow()}\n        </Typography>\n      </div>\n      {(user?.result?.googleId === post?.creator ||\n        user?.result?._id === post?.creator) && (\n        <div className={classes.overlay2}>\n          <Button\n            onClick={() => {\n              showModal();\n              setCurrentId(post._id);\n            }}\n            style={{ color: 'white' }}\n            size='small'\n          >\n            <MoreHorizIcon fontSize='default' />\n          </Button>\n        </div>\n      )}\n\n      <div>\n        <Button\n          className={classes.overlay3}\n          size='small'\n          color='primary'\n          //  disabled={!user?.result}\n          //onClick={() => dispatch(likePost(post._id))}\n          onClick={handleLike}\n        >\n          <Likes />\n        </Button>\n      </div>\n      <div className={classes.details}></div>\n      <Typography\n        className={classes.title}\n        //gutterBottom\n        variant='h6'\n        component='h2'\n      >\n        {post.title}\n      </Typography>\n      <Typography\n        className={classes.location}\n        //gutterBottom\n        variant='h6'\n        component='h2'\n      >\n        {post.location}\n      </Typography>\n      <Typography className={classes.message}>{post.message}</Typography>\n      <Typography\n        className={classes.price}\n        //gutterBottom\n        variant='h6'\n        component='h2'\n      >\n        {`$${post.tags}`}\n      </Typography>\n\n      {/*<CardContent className={classes.message}>\n       \n       </CardContent> */}\n\n      <CardActions>\n        {/*  <Button\n          className={classes.likeButton}\n          size='small'\n          color='primary'\n          //  disabled={!user?.result}\n          //onClick={() => dispatch(likePost(post._id))}\n          onClick={handleLike}\n        >\n          <Likes />\n        </Button>*/}\n\n        {(user?.result?.googleId === post?.creator ||\n          user?.result?._id === post?.creator) && (\n          <Button\n            className={classes.overlay4}\n            size='small'\n            color='secondary'\n            onClick={() => dispatch(deletePost(post._id))}\n          >\n            <DeleteIcon fontSize='small' />\n          </Button>\n        )}\n      </CardActions>\n    </Card>\n  );\n};\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}