{"ast":null,"code":"import _toConsumableArray from\"/Users/albertshay/Desktop/silkroad/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/albertshay/Desktop/silkroad/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/albertshay/Desktop/silkroad/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/albertshay/Desktop/silkroad/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/albertshay/Desktop/silkroad/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useMemo}from'react';import{Dashboard}from'@uppy/react';import{TextField,Button,Typography,Paper,Grid,FormControl}from'@material-ui/core';import{useDispatch,useSelector}from'react-redux';import FileBase from'react-file-base64';import FileUploadIcon from'@mui/icons-material/FileUpload';import{useHistory,Link}from'react-router-dom';import ChipInput from'material-ui-chip-input';import AlgoliaPlaces from'algolia-places-react';import{createPost,updatePost}from'../../actions/posts';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';// import Uploader from './Uploader';\nimport places from'places.js';import UploadIcon from'./UploadIcon';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var config={addId:process.env.REACT_APP_ALOGLIA_APP_ID,apiKey:process.env.REACT_APP_ALOGLIA_API_KEY,language:'en',countries:['us']};var Form=function Form(_ref){var _user$result3;var showModal=_ref.showModal,currentId=_ref.currentId,setCurrentId=_ref.setCurrentId;var _useState=useState({title:'',message:'',location:'',tags:[],selectedFile:''}),_useState2=_slicedToArray(_useState,2),postData=_useState2[0],setPostData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),location=_useState4[0],setLocation=_useState4[1];var post=useSelector(function(state){return currentId?state.posts.posts.find(function(message){return message._id===currentId;}):null;});var dispatch=useDispatch();var classes=useStyles();var user=JSON.parse(localStorage.getItem('profile'));var notify=function notify(){return toast('Please select image');};var history=useHistory();var clear=function clear(){setCurrentId(0);setPostData({title:'',message:'',location:'',tags:[],selectedFile:''});};useEffect(function(){if(!(post===null||post===void 0?void 0:post.title))clear();if(post)setPostData(post);},[post]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _user$result,_user$result2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(currentId===0){dispatch(createPost(_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name}),history));clear();}else{dispatch(updatePost(currentId,_objectSpread(_objectSpread({},postData),{},{name:user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name})));clear();showModal();}case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();if(!(user===null||user===void 0?void 0:(_user$result3=user.result)===null||_user$result3===void 0?void 0:_user$result3.name)){return/*#__PURE__*/_jsx(Paper,{className:classes.paperSmall,elevation:0,children:/*#__PURE__*/_jsx(Typography,{variant:\"h7\",align:\"center\",component:Link,to:\"/auth\",children:\"Sign in to buy & sell products\"})});}var handleAddChip=function handleAddChip(tag){setPostData(_objectSpread(_objectSpread({},postData),{},{tags:[].concat(_toConsumableArray(postData.tags),[tag])}));};var handleDeleteChip=function handleDeleteChip(chipToDelete){setPostData(_objectSpread(_objectSpread({},postData),{},{tags:postData.tags.filter(function(tag){return tag!==chipToDelete;})}));};/*#__PURE__*/_jsx(Grid,{item:true,xs:16,sm:9,md:12,children:/*#__PURE__*/_jsx(Form,{currentId:currentId,setCurrentId:setCurrentId,showModal:showModal})});return/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:9,children:[/*#__PURE__*/_jsx(Paper,{className:classes.paper,elevation:10,children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h7\",children:currentId?\"Editing product\":'Add new product'}),/*#__PURE__*/_jsx(TextField,{required:true,name:\"title\",className:classes.titleField,variant:\"outlined\",label:\"Title\",fullWidth:true,value:postData.title,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{title:e.target.value}));},InputProps:{classes:{root:classes.inputRoot}},InputLabelProps:{classes:{root:classes.labelRoot,focused:classes.labelFocused}},margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{required:true,name:\"message\",variant:\"outlined\",label:\"Description\",fullWidth:true,multiline:true,className:classes.textField,rows:10,value:postData.message,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{message:e.target.value}));},InputProps:{classes:{root:classes.inputRoot}},InputLabelProps:{classes:{root:classes.labelRoot,focused:classes.labelFocused}},margin:\"normal\"}),/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsx(AlgoliaPlaces,{placeholder:\"Type location here*\",defaultValue:location,options:config,onChange:function onChange(e){return setLocation(e.suggestion.value);},className:classes.locationAlgolia})}),/*#__PURE__*/_jsx(\"input\",{label:\"Location\",name:\"location\",className:classes.location,style:{fontFamily:'Montserrat'},placeholder:\" Click to confirm location*\",value:postData.location,onClick:function onClick(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{location:location}));}}),/*#__PURE__*/_jsx(TextField,{required:true,name:\"tags\",variant:\"outlined\",label:\"Price\",className:classes.priceInput,fullWidth:true,value:postData.tags,onChange:function onChange(e){return setPostData(_objectSpread(_objectSpread({},postData),{},{tags:e.target.value.split(',')}));},InputProps:{classes:{root:classes.inputRoot}},InputLabelProps:{classes:{root:classes.labelRoot,focused:classes.labelFocused}},margin:\"normal\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:classes.fileInput,children:/*#__PURE__*/_jsx(FileBase,{type:\"file\",className:classes.fileInput,multiple:false,onDone:function onDone(_ref3){var base64=_ref3.base64;return setPostData(_objectSpread(_objectSpread({},postData),{},{selectedFile:base64}));},label:UploadIcon})}),/*#__PURE__*/_jsx(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(ToastContainer,{})]})}),/*#__PURE__*/_jsx(\"br\",{})]});};export default Form;","map":{"version":3,"sources":["/Users/albertshay/Desktop/silkroad/client/src/components/Form/Form.js"],"names":["React","useState","useEffect","useRef","useMemo","Dashboard","TextField","Button","Typography","Paper","Grid","FormControl","useDispatch","useSelector","FileBase","FileUploadIcon","useHistory","Link","ChipInput","AlgoliaPlaces","createPost","updatePost","ToastContainer","toast","places","UploadIcon","useStyles","config","addId","process","env","REACT_APP_ALOGLIA_APP_ID","apiKey","REACT_APP_ALOGLIA_API_KEY","language","countries","Form","showModal","currentId","setCurrentId","title","message","location","tags","selectedFile","postData","setPostData","setLocation","post","state","posts","find","_id","dispatch","classes","user","JSON","parse","localStorage","getItem","notify","history","clear","handleSubmit","e","preventDefault","name","result","paperSmall","handleAddChip","tag","handleDeleteChip","chipToDelete","filter","paper","root","form","titleField","target","value","inputRoot","labelRoot","focused","labelFocused","textField","suggestion","locationAlgolia","fontFamily","priceInput","split","fileInput","base64","buttonSubmit"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\nimport { Dashboard } from '@uppy/react';\nimport {\n  TextField,\n  Button,\n  Typography,\n  Paper,\n  Grid,\n  FormControl,\n} from '@material-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FileBase from 'react-file-base64';\nimport FileUploadIcon from '@mui/icons-material/FileUpload';\nimport { useHistory, Link } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\nimport AlgoliaPlaces from 'algolia-places-react';\nimport { createPost, updatePost } from '../../actions/posts';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n// import Uploader from './Uploader';\nimport places from 'places.js';\nimport UploadIcon from './UploadIcon';\nimport useStyles from './styles';\n\nconst config = {\n  addId: process.env.REACT_APP_ALOGLIA_APP_ID,\n  apiKey: process.env.REACT_APP_ALOGLIA_API_KEY,\n  language: 'en',\n  countries: ['us'],\n};\nconst Form = ({ showModal, currentId, setCurrentId }) => {\n  const [postData, setPostData] = useState({\n    title: '',\n    message: '',\n    location: '',\n    tags: [],\n    selectedFile: '',\n  });\n  const [location, setLocation] = useState('');\n\n  const post = useSelector((state) =>\n    currentId\n      ? state.posts.posts.find((message) => message._id === currentId)\n      : null\n  );\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const notify = () => toast('Please select image');\n  const history = useHistory();\n\n  const clear = () => {\n    setCurrentId(0);\n    setPostData({\n      title: '',\n      message: '',\n      location: '',\n      tags: [],\n      selectedFile: '',\n    });\n  };\n\n  useEffect(() => {\n    if (!post?.title) clear();\n    if (post) setPostData(post);\n  }, [post]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (currentId === 0) {\n      dispatch(\n        createPost(\n          {\n            ...postData,\n            name: user?.result?.name,\n          },\n          history\n        )\n      );\n      clear();\n    } else {\n      dispatch(\n        updatePost(currentId, {\n          ...postData,\n          name: user?.result?.name,\n        })\n      );\n      clear();\n      showModal();\n    }\n  };\n\n  if (!user?.result?.name) {\n    return (\n      <Paper className={classes.paperSmall} elevation={0}>\n        <Typography variant='h7' align='center' component={Link} to='/auth'>\n          Sign in to buy & sell products\n        </Typography>\n      </Paper>\n    );\n  }\n\n  const handleAddChip = (tag) => {\n    setPostData({ ...postData, tags: [...postData.tags, tag] });\n  };\n\n  const handleDeleteChip = (chipToDelete) => {\n    setPostData({\n      ...postData,\n      tags: postData.tags.filter((tag) => tag !== chipToDelete),\n    });\n  };\n\n  <Grid item xs={16} sm={9} md={12}>\n    <Form\n      currentId={currentId}\n      setCurrentId={setCurrentId}\n      showModal={showModal}\n    />\n  </Grid>;\n\n  return (\n    <Grid item xs={12} sm={6} md={9}>\n      <Paper className={classes.paper} elevation={10}>\n        <form\n          autoComplete='off'\n          noValidate\n          className={`${classes.root} ${classes.form}`}\n          onSubmit={handleSubmit}\n        >\n          <Typography variant='h7'>\n            {currentId ? `Editing product` : 'Add new product'}\n          </Typography>\n          <TextField\n            required={true}\n            name='title'\n            className={classes.titleField}\n            variant='outlined'\n            label='Title'\n            fullWidth\n            value={postData.title}\n            onChange={(e) =>\n              setPostData({ ...postData, title: e.target.value })\n            }\n            InputProps={{ classes: { root: classes.inputRoot } }}\n            InputLabelProps={{\n              classes: {\n                root: classes.labelRoot,\n                focused: classes.labelFocused,\n              },\n            }}\n            margin='normal'\n          />\n          <TextField\n            required={true}\n            name='message'\n            variant='outlined'\n            label='Description'\n            fullWidth\n            multiline\n            className={classes.textField}\n            rows={10}\n            value={postData.message}\n            onChange={(e) =>\n              setPostData({ ...postData, message: e.target.value })\n            }\n            InputProps={{ classes: { root: classes.inputRoot } }}\n            InputLabelProps={{\n              classes: {\n                root: classes.labelRoot,\n                focused: classes.labelFocused,\n              },\n            }}\n            margin='normal'\n          />\n\n          {/* <TextField\n            name='message'\n            variant='outlined'\n            label='location'\n            fullWidth\n            option={config}\n            rows={1}\n            value={postData.message}\n            onChange={(e) => {\n              if (e.target.value === '') {\n                navigator.geolocation.getCurrentPosition(function (position) {\n                  console.log('Latitude is :', position.coords.latitude);\n                  console.log('Longitude is :', position.coords.longitude);\n                  location = position;\n                });\n              }\n              setPostData({\n                ...postData,\n                location: location\n                  ? { ...postData, location: location }\n                  : { ...postData, location: e.target.value },\n              });\n            }}\n            InputProps={{ classes: { root: classes.inputRoot } }}\n            InputLabelProps={{\n              classes: {\n                root: classes.labelRoot,\n                focused: classes.labelFocused,\n              },\n            }}\n            margin='normal'\n          /> */}\n          {/*   <ChipInput\n            name='tags'\n            variant='outlined'\n            label='Price'\n            fullWidth\n            value={postData.tags}\n            onAdd={(chip) => handleAddChip(chip)}\n            onDelete={(chip) => handleDeleteChip(chip)}\n        />*/}\n          <FormControl>\n            <AlgoliaPlaces\n              placeholder='Type location here*'\n              defaultValue={location}\n              options={config}\n              onChange={(e) => setLocation(e.suggestion.value)}\n              className={classes.locationAlgolia}\n            />\n          </FormControl>\n          <input\n            label='Location'\n            name='location'\n            className={classes.location}\n            style={{ fontFamily: 'Montserrat' }}\n            placeholder=' Click to confirm location*'\n            value={postData.location}\n            onClick={(e) => setPostData({ ...postData, location: location })}\n          />\n\n          <TextField\n            required={true}\n            name='tags'\n            variant='outlined'\n            label='Price'\n            className={classes.priceInput}\n            fullWidth\n            value={postData.tags}\n            onChange={(e) =>\n              setPostData({ ...postData, tags: e.target.value.split(',') })\n            }\n            InputProps={{ classes: { root: classes.inputRoot } }}\n            InputLabelProps={{\n              classes: {\n                root: classes.labelRoot,\n                focused: classes.labelFocused,\n              },\n            }}\n            margin='normal'\n          />\n\n          <br />\n          <div className={classes.fileInput}>\n            <FileBase\n              type='file'\n              className={classes.fileInput}\n              multiple={false}\n              onDone={({ base64 }) =>\n                setPostData({ ...postData, selectedFile: base64 })\n              }\n              label={UploadIcon}\n            />\n          </div>\n\n          <Button\n            className={classes.buttonSubmit}\n            variant='contained'\n            color='primary'\n            size='large'\n            type='submit'\n          >\n            Submit\n          </Button>\n          <ToastContainer />\n          {/*  <Button\n            variant='contained'\n            color='secondary'\n            size='small'\n            onClick={clear}\n            fullWidth\n          >\n            Clear\n        </Button>*/}\n        </form>\n      </Paper>\n      <br />\n    </Grid>\n  );\n};\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}