{"version":3,"sources":["index.js"],"names":["h","Fragment","require","prettierBytes","truncateString","renderFileName","props","author","name","file","meta","getMaxNameLength","containerWidth","renderAuthor","providerName","remote","dot","url","renderFileSize","size","ReSelectButton","isGhost","toggleAddFilesPanel","i18n","ErrorButton","onClick","error","module","exports","FileInfo","source","alert"],"mappings":"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","sourcesContent":["const { h, Fragment } = require('preact')\nconst prettierBytes = require('@transloadit/prettier-bytes')\nconst truncateString = require('@uppy/utils/lib/truncateString')\n\nconst renderFileName = (props) => {\n  const { author, name } = props.file.meta\n\n  function getMaxNameLength () {\n    if (props.containerWidth <= 352) {\n      return 35\n    }\n    if (props.containerWidth <= 576) {\n      return 60\n    }\n    // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n    return author ? 20 : 30\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-name\" title={name}>\n      {truncateString(name, getMaxNameLength())}\n    </div>\n  )\n}\n\nconst renderAuthor = (props) => {\n  const { author } = props.file.meta\n  const { providerName } = props.file.remote\n  const dot = `\\u00B7`\n\n  if (!author) {\n    return null\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-author\">\n      <a\n        href={`${author.url}?utm_source=Companion&utm_medium=referral`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {truncateString(author.name, 13)}\n      </a>\n      {providerName ? (\n        <Fragment>\n          {` ${dot} `}\n          {providerName}\n        </Fragment>\n      ) : null}\n    </div>\n  )\n}\n\nconst renderFileSize = (props) => props.file.size && (\n<div className=\"uppy-Dashboard-Item-statusSize\">\n  {prettierBytes(props.file.size)}\n</div>\n)\n\nconst ReSelectButton = (props) => props.file.isGhost && (\n<span>\n  {' \\u2022 '}\n  <button\n    className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\"\n    type=\"button\"\n    onClick={props.toggleAddFilesPanel}\n  >\n    {props.i18n('reSelect')}\n  </button>\n</span>\n)\n\nconst ErrorButton = ({ file, onClick }) => {\n  if (file.error) {\n    return (\n      <button\n        className=\"uppy-Dashboard-Item-errorDetails\"\n        aria-label={file.error}\n        data-microtip-position=\"bottom\"\n        data-microtip-size=\"medium\"\n        onClick={onClick}\n        type=\"button\"\n      >\n        ?\n      </button>\n    )\n  }\n  return null\n}\n\nmodule.exports = function FileInfo (props) {\n  return (\n    <div\n      className=\"uppy-Dashboard-Item-fileInfo\"\n      data-uppy-file-source={props.file.source}\n    >\n      {renderFileName(props)}\n      <div className=\"uppy-Dashboard-Item-status\">\n        {renderFileSize(props)}\n        {renderAuthor(props)}\n        {ReSelectButton(props)}\n        <ErrorButton\n          file={props.file}\n          // eslint-disable-next-line no-alert\n          onClick={() => alert(props.file.error)} // TODO: move to a custom alert implementation\n        />\n      </div>\n    </div>\n  )\n}\n"]}